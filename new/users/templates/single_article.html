<html>
<head>
    {% extends 'nav.html' %}
{% load static %}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    
    <meta charset="UTF-8" name="viewport" content="width=device-width"/>
</head>

<body>
{% block content %}
<div class="container">
    <div class="article">
        <div class="section">
            <h2>{{article.title}}</h2>
        </div>
        <hr>
        <div class="section">
            <p>{{article.content}}</p>
        </div>
    </div>
    <hr>

    <div class="section">
        {% for tag in article.tags.all %}
            <a href = "{% url 'tagged' tag.id %}">#{{tag.slug}}</a>
        {% endfor%}
    </div><br>
    <hr>

    <div class="section">
        <a class="btn btn-warning " href = {% url 'home' %}>Home</a>
        {% if article.user.id == user.id %}
        <a class="btn btn-info" href ="{%url 'update_article' article.id %}" >Update  </a>
        <a class="btn btn-danger" href="{%url 'delete_article' article.id %}">Delete</a>
        {% endif %}

        <input type="button" class="like" name="{{ article.id }}" value="Like"> 
        <div class=" pull-right">
            <p id="count{{ article.id }}">count : {{ article.like_count}}</p>
        </div><br>
    </div>
    <hr>

    <form method="POST"> 
        {% csrf_token %}
            <label>comment</label>  {{ commentform.comment_text}} 
            <input type="hidden" id="user" name="user" value="{{user.id}}">
            <input type="hidden" id="article" name="article" value="{{article.id}}">
        <button class="btn btn-default" type="submit">Save</button>
    </form>
    <hr>
    {% for comment in comments %}
        {{comment.user}} : {{comment.comment_text}}
    {% if comment.user.id == user.id %}
        <a class="btn btn-danger" href="{%url 'delete_comment' comment.id %}">delete</a>
    {% endif%}
    <br/>
    <hr/>
    {% endfor %}
    <h3>Answer</h3><hr>
    {% for answer in answers %}
        {{answer.answer_text}}
        <a class="btn btn-danger" href="{%url 'delete_answer' answer.id %}">delete</a><br/>
    {% endfor %}
    <form method="POST"> 
    {% csrf_token %}
        <label>Answer</label>  {{ answerform.answer_text}} 
        <input type="hidden" id="user" name="user" value="{{user.id}}">
        <input type="hidden" id="article" name="article" value="{{article.id}}">
        <button class="btn btn-default" type="submit">Save</button>
    </form>
    {% endblock %}

    {% block footer_scripts %}
        {{block.super}}
    <script src="{% static 'like.js' %}"></script>
    {% endblock %}

</div>
</body>
</html>